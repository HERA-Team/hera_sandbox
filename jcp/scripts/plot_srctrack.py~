#! /usr/bin/env python

import aipy as a, numpy as n, pylab as p, optparse, sys

o = optparse.OptionParser()
o.set_usage('plot_srctrack.py npzfile')
o.set_description(__doc__)
a.scripting.add_standard_options(o,cal=True)

opts,args = o.parse_args(sys.argv[1:])

aa = a.cal.get_aa(opts.cal, n.array([.150]))

for file in args:
    npz = n.load(file)
    times = []
    for t in npz['times']:
        aa.set_jultime(t)
        times.append(aa.sidereal_time())
    spec = n.mean(npz['spec'].real,axis=1)
    p.semilogy(times,spec,',')
p.show()
    
