#! /usr/bin/env python
import numpy as n, pylab as p, aipy as a
import optparse, sys

o = optparse.OptionParser()
a.scripting.add_standard_options(o, cal=True, pol=True)
o.add_option('-a', '--ant', dest='ant', type=int, default=0,
    help='Which antenna to use in the plot. Default = 0.')
opts, args = o.parse_args(sys.argv[1:])

uv = a.miriad.UV(args[0])
aa = a.cal.get_aa(opts.cal, uv['sdf'], uv['sfreq'], uv['nchan'])

im = a.img.Img(size=100, res=.5)
tx,ty,tz = im.get_top()
invalid = tx.mask.copy()
tx = tx.filled(0).flatten()
ty = ty.filled(0).flatten()
tz = tz.filled(0).flatten()


bm = aa[opts.ant].bm_response((tx,ty,tz), pol=opts.pol)

p.plot(bm)
p.show()
